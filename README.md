# Agent S 企画書

## 概要

**Agent S**は、Symbolブロックチェーンのノードにおけるキー管理支援ツールです。  
Shoestring環境で運用されるノードに対して、主に以下の機能を提供します。

- ノードに紐づく鍵情報の参照
- キーリンク/アンリンク用のトランザクションファイル生成

本ツールは一時的な補助ツールとして設計されており、ノードの構築や再設定時の支援を目的としています。  
最終的には不要となるユーティリティであり、手軽さと即応性を重視しています。

---

## アプリ名

**Agent S**（エージェント・エス）

- Symbolノードのための一時的な“任務遂行エージェント”という位置づけ
- CLIツール形式で提供

---

## 機能1: キー参照

指定したキー（`main`, `node`, `remo`, `vrf`）に対応する**公開鍵**および**アドレス**を表示します。  
また、必要に応じて**秘密鍵**も表示することが可能です。

### 引数

| 引数名 | 説明 | 必須 | デフォルト値 |
|--------|------|------|--------------|
| `--key-type` | 参照するキーの種別（main / node / remo / vrf） | ✅ | - |
| `--config` | Shoestringの設定ファイルパス | ✅ | `./shoestring/shoestring.conf` |
| `--ca-key` | CA秘密鍵のパス | ✅ | `./ca.key.pem` |
| `--keys-dir` | 鍵ファイルが保存されているディレクトリ | ✅ | `./keys` |
| `--show-private-key` | 秘密鍵も表示するか | ❌ | `false` |

### 実行例（文章形式）

例えば `--key-type=node` を指定して実行すると、`keys` ディレクトリ内の `node.key.pem` を読み取り、  
その公開鍵とアドレスを表示します。  
`--show-private-key` フラグをつけると、秘密鍵も追加で表示されます。

---

## 機能2: キーリンク / アンリンク トランザクションファイル生成

ノードに必要な**ハーベスティングキー**および**投票キー**に関する**リンク/アンリンク用トランザクションファイル**を生成します。  
リンク対象のキーは、統計サービスを通じてRESTエンドポイントから現在の状態を取得し、自動的に判断されます。

### 引数

| 引数名 | 説明 | 必須 | デフォルト値 |
|--------|------|------|--------------|
| `--config` | Shoestringの設定ファイルパス | ✅ | `./shoestring/shoestring.conf` |
| `--ca-key` | CA秘密鍵のパス | ✅ | `./ca.key.pem` |
| `--keys-dir` | 鍵ファイルが保存されているディレクトリ | ✅ | `./keys` |

### 実行例（文章形式）

ツールを実行すると、統計サービスから取得したRESTエンドポイント情報をもとに、  
現在リンクされていないキー種別を判別し、それに対応するリンクまたはアンリンクトランザクションを生成します。  
生成されたファイルはバイナリ形式で保存され、`symbol-shoestring` を使った署名・アナウンスに使用できます。

---

## 利用シーン

- Symbolノード初期構築後のキー確認
- キーリンク前の準備作業
- 投票キーアンリンクの事前準備
- ノード再構築後のリンク再設定支援

---

## 今後の展望

Agent S はあくまで**一時的な補助ツール**として設計されているため、以下の方針を取ります。

- **依存性を最小限に抑えたCLI設計**
- **ドキュメントを整備してセルフサービスでの利用を前提**
- **将来的には他の自動化ツールへの統合・置換を想定**

---

## 製作者コメント

> 「エージェントSは、あなたのノードが正常に活動するために、静かに任務を遂行します。  
> 任務完了後、記録も残さず姿を消します。」
